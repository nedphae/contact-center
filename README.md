# å°ç™½å®¢æœç³»ç»Ÿ

[![Kotlin version](https://img.shields.io/badge/Kotlin-1.4.32-blue)](https://kotlinlang.org/docs/reference/whatsnew14.html)
[![License](https://img.shields.io/badge/License-Apache%202.0-red.svg)](https://www.apache.org/licenses/LICENSE-2.0)

**å°ç™½å®¢æœç°å·²æ¨å‡ºåœ¨çº¿ç‰ˆæœ¬ï¼Œè®¿é—® [https://xbcs.top/](https://xbcs.top/) äº†è§£è¯¦æƒ…** (å½“å‰å¼€æºä¸ºæ—©æœŸç‰ˆæœ¬ï¼Œæ•´ä½“æ¶æ„ä¸åœ¨çº¿ç‰ˆä¸€æ ·)


åŸºäº Spring Cloud çš„é«˜å¹¶å‘ï¼Œé«˜å¯ç”¨ï¼Œå…¨å¼‚æ­¥å¼€æºå¾®æœåŠ¡å®¢æœç³»ç»Ÿ

å…¨è‡ªç ”ç³»ç»Ÿï¼ŒåŒ…æ‹¬åå°æœåŠ¡ç«¯å’Œæ¡Œé¢å®¢æˆ·ç«¯ã€‚åå°ä½¿ç”¨ Kotlin + Spring Cloud å¼€å‘ï¼ˆæœ¬é¡¹ç›®ä¹Ÿå¯ä½œä¸ºä¸€ä¸ª Kotlin å¾®æœåŠ¡åç«¯çš„ç¤ºä¾‹é¡¹ç›®ï¼‰

å…¶ä»–é¡¹ç›® :

| é¡¹ç›®åç§°     | é¡¹ç›®åœ°å€                             | è¯¦ç»†è¯´æ˜                             |
| :---------: | :--------------------------------- | :--------------------------------- |
| å®¢æœç³»ç»Ÿæ¡Œé¢å®¢æˆ·ç«¯ | [contact-center-client](https://github.com/nedphae/contact-center-client) | åŸºäº Electron + React å¼€å‘çš„æ¡Œé¢å®¢æˆ·ç«¯ï¼ŒUI ä½¿ç”¨ material-ui |
| å®¢æœç³»ç»Ÿç”¨æˆ·ç«¯ | [customer-web-client](https://github.com/nedphae/customer-web-client) | å®¢æœç³»ç»Ÿç”¨æˆ·ç«¯ï¼ŒåŸºäº [ChatUI Pro](https://chatui.io/sdk/getting-started) å¼€å‘ |

### å®¢æœç³»ç»Ÿè¯•ç”¨è´¦æˆ·

| æœºæ„ID          | è´¦æˆ·åç§°             | å¯†ç                 | å®¢æˆ·è®¿é—®é“¾æ¥             | å®¢æœç«¯                |
| :------------: | :------------------ | :------------------ | :---------------------- | :------------------------- |
| 1001 | admin | 123456 | https://im.xbcs.top/chat/?sc=AGACSCCx | [Windows å®¢æˆ·ç«¯](https://xbcs.top/download/) / [Webç‰ˆæœ¬](https://im.xbcs.top/workbench)|

### ç³»ç»Ÿç‰¹æ€§

- å¾®æœåŠ¡ï¼Œé«˜å¹¶å‘æ¶æ„ï¼Œè½»æ¾åº”å¯¹æµé‡å†²å‡»
- å…¨å¼‚æ­¥ç³»ç»Ÿï¼Œååº”å¼æ¶æ„ï¼Œæé«˜å•æœºèµ„æºåˆ©ç”¨ï¼ˆåŸºäº WebFluxï¼Œæ•°æ®åº“è®¿é—®ä½¿ç”¨ [R2DBC](https://r2dbc.io/) ï¼‰
- è‰¯å¥½çš„æ¨¡å—åŒ–è®¾è®¡ï¼Œæ˜“äºæ‰©å±•
- æä¾›å¤šç§æ•°æ®æ¥å£ (REST API æ¥å£ + GraphQL)
- åŸºäº OAuth 2.0 æƒé™è®¤è¯ç³»ç»Ÿ + JWT æ— çŠ¶æ€çš„å®‰å…¨éªŒè¯
- æ”¯æŒ OSS æ–‡ä»¶å­˜å‚¨ï¼ˆé»˜è®¤åŸºäº [MinIO](https://min.io/) ï¼Œå…¼å®¹ Amazon S3 ï¼‰
- æœºå™¨äººå®¢æœ: æä¾›åŸºäº Elasticsearch çš„é—®ç­”æœºå™¨äºº
- å®¢æœäººå‘˜å¿™ç¢Œæ—¶ï¼Œå®¢æˆ·è‡ªåŠ¨æ’é˜Ÿ
- å®¢æˆ·èµ„æºç®¡ç† + å…¨æ–‡æ£€ç´¢
- å¸¸ç”¨è¯æœ¯ï¼Œå¿«æ·è¾“å…¥
- å¤šæ¥å¾…ç»„è®¾ç½®ï¼šè½»æ¾åˆ†ç±»ä¸åŒå®¢æˆ·ç¾¤ä¸å¯¹åº”å®¢æœ
- é»‘åå•ã€å®¢æˆ·ç•™è¨€

### æˆªå›¾

- **èŠå¤©å’¨è¯¢ç•Œé¢**<br/>
  ![èŠå¤©å’¨è¯¢ç•Œé¢](doc/img/å®¢æœç³»ç»Ÿæˆªå›¾/èŠå¤©å’¨è¯¢ç•Œé¢.png)
- **WebåµŒå…¥ç•Œé¢**<br/>
  ![èŠå¤©å’¨è¯¢ç•Œé¢](doc/img/å®¢æœç³»ç»Ÿæˆªå›¾/web-embed.png)
- **ä¼šè¯æ ‡è®°ç½®é¡¶**<br/>
  ![èŠå¤©å’¨è¯¢ç•Œé¢](doc/img/å®¢æœç³»ç»Ÿæˆªå›¾/ä¼šè¯æ ‡è®°-ç½®é¡¶.png)
- **å¿«æ·å›å¤**<br/>
  ![èŠå¤©å’¨è¯¢ç•Œé¢](doc/img/å®¢æœç³»ç»Ÿæˆªå›¾/å®¢æœå¿«æ·å›å¤.png)

### å®‰è£…

#### ç³»ç»Ÿç¯å¢ƒ

- PostgreSQL 10.3.17
- Consul 9.2.7
- Elasticsearch 7.13.2
- Kafka 12.12.0
- Cassandra 7.5.7
- MinIO 6.7.2
- Redis 10.6.4

#### å¼€å‘ç¯å¢ƒ

- JDK 11.0.8
- Kotlin 1.4.32

#### é…ç½®

åœ¨å„ä¸ªé¡¹ç›® resources/application.yml ä¸­ä¿®æ”¹ç›¸åº”çš„æ•°æ®åº“ã€Consulã€Kafkaï¼ˆä»… [im-access](im-access/src/main/resources/application.yml)
å’Œ [message-server](message-server/src/main/resources/application.yml) æœåŠ¡éœ€è¦ï¼‰ã€RedisæœåŠ¡åœ°å€

Elasticsearch åœ°å€åœ¨é¡¹ç›® config/ReactiveRestClientConfig.kt ä¸­ä¿®æ”¹

MinIO é…ç½®åœ¨ [MinioConfig](im-access/src/main/kotlin/com/qingzhu/imaccess/config/MinioConfig.kt) ä¸­ä¿®æ”¹

PostgreSQL SQL: [SQL æ–‡ä»¶](./Init-Script.sql) ä¼šå¯¼å…¥éœ€è¦çš„è¡¨ç»“æ„ï¼Œå’Œéƒ¨åˆ†åˆå§‹åŒ–æ•°æ®ï¼Œ

#### è¿è¡Œ

SpringBoot é¡¹ç›®ï¼Œå¯ä»¥åœ¨IDEä¸­è¿è¡Œï¼Œä¹Ÿå¯ä»¥æ‰“åŒ…ä¸ºå•ç‹¬çš„ jar åŒ…è¿è¡Œ

### é¡¹ç›®å›¾ç¤º

![æµç¨‹å›¾](doc/img/ç³»ç»Ÿæ¶æ„å›¾.png)

[å®¢æœç³»ç»Ÿæ¶æ„å¿ƒå¾—](doc/æ¶æ„è¯¦è§£.md)

### è¯¦ç»†ä»‹ç»

å­ç³»ç»Ÿï¼ˆæœ¬é¡¹ç›®ï¼‰ :

| ç³»ç»Ÿåç§°     | ç³»ç»Ÿåœ°å€                                  | è¯¦ç»†è¯´æ˜                             |
| :---------: | :--------------------------------------- | :--------------------------------- |
| æœºå™¨äººæœåŠ¡   | [bot](bot)                               | å®¢æœç³»ç»ŸQAï¼ˆbase on ElasticSearchï¼‰æœºå™¨äºº |
| è°ƒåº¦æœåŠ¡     | [dispatching-center](dispatching-center) | å®¢æœè°ƒåº¦æœåŠ¡ï¼Œæ ¹æ®é…ç½®ç­–ç•¥åˆ†é…å®¢æœ |
| ç½‘å…³        | [gateway](gateway)                       | å¾®æœåŠ¡ç½‘å…³ï¼Œæä¾›ç»Ÿä¸€çš„ç³»ç»Ÿå…¥å£ |
| æ¥å…¥æœåŠ¡     | [im-access](im-access)                   | IM WebSocket æ¥å…¥æœåŠ¡ï¼ŒåŒ…æ‹¬ å®¢æˆ·ç«¯ http æ¥å…¥ |
| æ¶ˆæ¯æœåŠ¡     | [message-server](message-server)         | IM æ¶ˆæ¯è·¯ç”±ï¼Œæ¶ˆæ¯å­˜å‚¨æœåŠ¡ï¼Œå®¢æœ/å®¢æˆ·åœ¨çº¿çŠ¶æ€ç®¡ç†æœåŠ¡ï¼ˆbase on hazelcast embeddedï¼‰ |
| æˆæƒæœåŠ¡     | [oauth2-auth-server](oauth2-auth-server) | oauth2 æˆæƒæœåŠ¡ï¼Œç­¾å‘åŠ å¯†JWT |
| å®¢æœä¿¡æ¯     | [staff-admin](staff-admin)               | å®¢æœä¿¡æ¯ç®¡ç†æœåŠ¡ï¼ŒåŒ…æ‹¬å®¢æœè´¦å·ï¼Œå®¢æœåˆ†ç»„ï¼Œå®¢æœåˆ†æµï¼ˆæ¥å¾…ç»„ï¼‰ï¼Œé…ç½®ç®¡ç†ç­‰ |
| graphql èšåˆæœåŠ¡ | [GraphQLBFF](GraphQLBFF)             | GraphQL æ¥å£æœåŠ¡ï¼Œæä¾›åå° http æ¥å£çš„ GraphQL èšåˆå°è£… |

### å¼€å‘è®¡åˆ’æ³¨è§£å›¾ä¾‹

| Mark     | Description      |
| :------: | :--------------- |
| ğŸƒ       | work in progress |
| âœ‹       | blocked task     |
| âŒ       | deprecated       |
| âš«        | planning         |

### Changelog

[Changelog](CHANGELOG.md)

### è”ç³»æ–¹å¼

**email: [nedphae@gmail.com](mailto:nedphae@gmail.com)**

**QQ ç¾¤:**<br />

![qq group](doc/img/QQgroup.png)
